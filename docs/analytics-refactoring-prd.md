# PRD: KEAI 방문통계 페이지 KPFC 스타일 리팩토링

## 1. 개요

### 1.1 프로젝트 목표
KPFC 방문통계 페이지 디자인과 기능을 KEAI에 그대로 적용하고, 연결값(API 엔드포인트, 브랜드 색상)만 KEAI 설정으로 변경

### 1.2 범위
- `dashboard/analytics.html` - KPFC 구조로 재작성
- `js/analytics.js` - KPFC 로직으로 재작성 (KEAI API 연동 유지)
- `css/dashboard.css` - KPFC 스타일 추가 (기존 스타일 유지)
- `api/analytics.js` - 기존 유지 (변경 없음)
- `api/cron-analytics.js` - 기존 유지 (변경 없음)

---

## 2. 현재 상태 분석

### 2.1 KPFC 방문통계 특징

#### UI 구조
1. **통합 기간 필터 섹션**
   - 빠른 기간 버튼: 오늘, 7일, 14일, 30일, 90일
   - 날짜 입력: 시작일 ~ 종료일
   - 적용 버튼 + 새로고침 버튼
   - 현재 기간 표시

2. **통계 카드 (4개)**
   - 방문자, 페이지뷰, 평균 체류시간, 이탈률
   - 전 기간 대비 변화율 표시

3. **일별 방문 추이 차트**
   - 높이: 200px
   - 방문자 + 페이지뷰 라인 차트

4. **분석 그리드 (5개 섹션)**
   - 트래픽 소스
   - 유입 경로
   - 기기별 사용자
   - 인기 페이지
   - 방문 지역

5. **히스토리 섹션**
   - 기간 비교 카드 (일간/주간/월간)
   - 장기 추이 차트 (250px)
   - 일별 상세 테이블 + 페이지네이션

6. **분석 평가 섹션**
   - 자동 생성 인사이트

#### 데이터 연동
- GA4 Worker API: `https://kpfc-analytics.a01027770093.workers.dev`
- 엔드포인트:
  - `/analytics/all?period={period}` - 전체 분석 데이터
  - `/history/cached?days={days}` - 히스토리 데이터

### 2.2 KEAI 방문통계 현재 상태

#### UI 구조
1. 기간 탭 (일간/주간/월간)
2. 통계 카드 4개 (방문자, 페이지뷰, 체류시간, 접수)
3. 차트 (180px)
4. 인사이트 섹션
5. 데이터 테이블
6. 전환율 섹션
7. 추가 통계 섹션 (트래픽 소스, 기기별, 인기 페이지, 유입 경로, 방문 지역)

#### 데이터 연동
- Airtable 기반 캐시 시스템
- API 엔드포인트: `/api/analytics`

---

## 3. 요구사항

### 3.1 기능 요구사항

| ID | 요구사항 | 우선순위 |
|----|----------|----------|
| F-01 | 통합 기간 필터 (빠른 버튼 + 날짜 입력) | 필수 |
| F-02 | 기간 비교 카드 (일간/주간/월간) | 필수 |
| F-03 | 장기 추이 차트 (250px) | 필수 |
| F-04 | 일별 상세 테이블 + 페이지네이션 | 필수 |
| F-05 | 분석 평가 섹션 | 필수 |
| F-06 | KEAI API 연동 유지 | 필수 |

### 3.2 디자인 요구사항

| ID | 요구사항 | 설명 |
|----|----------|------|
| D-01 | KPFC 레이아웃 동일 적용 | HTML 구조 일치 |
| D-02 | 차트 높이 (PC: 250px, 모바일: 200px) | KPFC 동일 |
| D-03 | 브랜드 색상 KEAI 유지 | #0066CC (Primary) |
| D-04 | 모바일 반응형 지원 | KPFC 동일 |

### 3.3 연결값 변경

| 항목 | KPFC | KEAI |
|------|------|------|
| API URL | `https://kpfc-analytics.a01027770093.workers.dev` | `/api/analytics` |
| Primary 색상 | `#1D00AD` | `#0066CC` |
| 로고 | KPFC | KEAI |
| 사이드바 메뉴 | KPFC 메뉴 | KEAI 대시보드 메뉴 |

---

## 4. 제외 사항

- API 엔드포인트 구조 변경 (기존 `/api/analytics` 유지)
- Airtable 스키마 변경 (기존 필드 유지)
- Cron 작업 로직 변경

---

## 5. 성공 기준

1. KPFC 방문통계와 동일한 UI/UX
2. KEAI API 데이터 정상 표시
3. 모바일 반응형 정상 동작
4. 기간 필터 정상 동작
5. 페이지네이션 정상 동작
